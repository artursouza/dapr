  
# Dapr 1.0.0

We're happy to announce the release of Dapr 1.0.0!

We would like to extend our thanks to all the new and existing contributors who helped make this release happen.

**Highlights**

If you're new to Dapr, visit the [getting started](https://docs.dapr.io/getting-started/) page and familiarize yourself with Dapr.

Docs have been updated with all the new features and changes of this release. To get started with new capabilities introduced in this release, go to the [Concepts](https://docs.dapr.io/concepts/) and the [Developing applications](https://docs.dapr.io/developing-applications/).

> **Note: This release contains a few [breaking changes](#breaking-changes).**

See [this](#upgrading-to-dapr-100) section on upgrading Dapr to version 1.0.0.

## Acknowledgements

Thanks to everyone who made this release possible!

@AaronCrawfis, @XavierGeerinck, @Yggdrasill-7C9, @alpha-baby, @apuzyrevsky, @arghya88, @artursouza, @beiwei30, @bvwells, @cmendible, @gaoxinge, @gdhuper, @halspang, @jdubois, @jigargandhi, @karishma-chawla, @karoldeland, @kendallroden, @malotho-zz, @msfussell, @mukundansundar, @orizohar, @patrickdemooij, @perokvist, @pkedy, @rynowak, @skyao, @slacksach, @tcnghia, @trondhindenes, @vinayada1, @wcs1only, @xiazuojie, @yaron2, @youngbupark

## New in this release

### Dapr Runtime

- **RESOLVED** Add sha256sum to the released files [626](https://github.com/dapr/dapr/issues/626)

- **RESOLVED** [E2E Scenario Tests] Cross language actor invocation [1165](https://github.com/dapr/dapr/issues/1165)

- **RESOLVED** [E2E Scenario Tests] Expand e2e for Bindings for GRPC and HTTP permutations [1167](https://github.com/dapr/dapr/issues/1167)

- **RESOLVED** [E2E Scenario Tests] Expand e2e for PubSub for GRPC and HTTP permutations [1168](https://github.com/dapr/dapr/issues/1168)

- **RESOLVED** oauth middleware not obtaining token [1699](https://github.com/dapr/dapr/issues/1699)

- **RESOLVED** [E2E Scenario Tests] for Actor Service Invocation  [1759](https://github.com/dapr/dapr/issues/1759)

- **RESOLVED** [E2E Scenario Tests] for Middleware [1767](https://github.com/dapr/dapr/issues/1767)

- **RESOLVED** [E2E Scenario Tests] Negative tests for Actors [1812](https://github.com/dapr/dapr/issues/1812)

- **RESOLVED** [E2E Scenario Tests] Add more E2E tests for StateTransaction API [2128](https://github.com/dapr/dapr/issues/2128)

- **RESOLVED** [E2E Scenario tests] for Service Invocation across namespaces [2207](https://github.com/dapr/dapr/issues/2207)

- **ADDED** Use OpenTelemetry Collector for metrics. [2296](https://github.com/dapr/dapr/issues/2296)

- **RESOLVED** Require versions in APIs [2297](https://github.com/dapr/dapr/issues/2297)

- **RESOLVED** v1.0 Milestone 4 Plan [2347](https://github.com/dapr/dapr/issues/2347)

- **FIXED** Update E2E procedures to replace deprecated kafka chart [2450](https://github.com/dapr/dapr/issues/2450)

- **FIXED** Support for binary data when wrapping pubsub payload as CloudEvent. [2612](https://github.com/dapr/dapr/issues/2612)

- **ADDED** E2E test to verify trace export [2621](https://github.com/dapr/dapr/issues/2621)

- **RESOLVED** Update the license header in all files [2758](https://github.com/dapr/dapr/issues/2758)

- **RESOLVED** Apply access list url normalization [2768](https://github.com/dapr/dapr/pull/2768)

- **RESOLVED** Helm chart has duplicate securityContext attributes for dapr-sidecar-injector [2784](https://github.com/dapr/dapr/issues/2784)

- **RESOLVED** Allow duplicate query string parameters in service to service invocation [2786](https://github.com/dapr/dapr/pull/2786)

- **RESOLVED** add break in for loop [2788](https://github.com/dapr/dapr/pull/2788)

- **FIXED** gRPC app callback should use data_base64 CloudEvent field when present. [2794](https://github.com/dapr/dapr/issues/2794)

### Dapr CLI

- Fix Dapr stable version initialization [592](https://github.com/dapr/cli/issues/592)

### Components

- **RESOLVED** Conformance Tests - Decide and finalize the list of components for GA [406](https://github.com/dapr/components-contrib/issues/406)

- **RESOLVED** Conformance Tests - Implement API Tests for StateStore [407](https://github.com/dapr/components-contrib/issues/407)

- **RESOLVED** Conformance Tests - Implement API test for SecretStore [408](https://github.com/dapr/components-contrib/issues/408)

- **RESOLVED** Conformance Tests - Implement sample API tests for Bindings [409](https://github.com/dapr/components-contrib/issues/409)

- **RESOLVED** Conformance Tests - Implement sample API tests for PubSub [410](https://github.com/dapr/components-contrib/issues/410)

- **RESOLVED** Conformance Tests - Document the conformance tests process [411](https://github.com/dapr/components-contrib/issues/411)

- **RESOLVED** Azure Blob Storage Binding Expecting String for Data [492](https://github.com/dapr/components-contrib/issues/492)

- **RESOLVED** Remove Exporter Components now OpenTelemetry is adopted.  [508](https://github.com/dapr/components-contrib/issues/508)

- **RESOLVED** Conformance tests - Setup and implement conformance test for Azure Blob Storage Binding [593](https://github.com/dapr/components-contrib/issues/593)

- **RESOLVED** Conformance tests - Setup and implement conformance test for Azure Event Grid Binding [594](https://github.com/dapr/components-contrib/issues/594)

- **RESOLVED** Conformance tests - Setup and implement conformance test for Azure Service Bus PubSub [596](https://github.com/dapr/components-contrib/issues/596)

- **RESOLVED** Conformance tests - Setup and implement conformance test for Kubernetes Secret Store [597](https://github.com/dapr/components-contrib/issues/597)

- **RESOLVED** Conformance tests - Setup and implement conformance test for HTTP/HTTPS Binding [598](https://github.com/dapr/components-contrib/issues/598)

- **RESOLVED** Conformance tests - Setup and implement conformance test for Azure Cosmos DB State store [599](https://github.com/dapr/components-contrib/issues/599)

- **RESOLVED** Conformance Tests - Setup and implement Azure Key vault for tests [604](https://github.com/dapr/components-contrib/issues/604)

- **RESOLVED** Conformance tests - Setup input bindings API tests  [617](https://github.com/dapr/components-contrib/issues/617)

- **RESOLVED** Conformance tests - Setup MongoDb state conformance tests [618](https://github.com/dapr/components-contrib/issues/618)

- **RESOLVED** Conformance tests - Setup Azure Service Bus Queue bindings conf tests  [619](https://github.com/dapr/components-contrib/issues/619)

- **RESOLVED** Allow DynamoDB state store to resolve credentials using AWS SDK credentials chain [647](https://github.com/dapr/components-contrib/issues/647)

- **RESOLVED** Support Kafka partition key in Pub/Sub [667](https://github.com/dapr/components-contrib/issues/667)

- **FIXED** handling of key not found in mongodb to return empty result instead of errror. [684](https://github.com/dapr/components-contrib/issues/684)

- **RESOLVED** Error when saving byte[] in cosmosdb [685](https://github.com/dapr/components-contrib/issues/685)

- **RESOLVED** Kafka pubsub can drop message in partial failures [687](https://github.com/dapr/components-contrib/issues/687)

### .NET SDK

- **RESOLVED** Multiple calls to UseActors should throw an exception or compose [411](https://github.com/dapr/dotnet-sdk/issues/411)

- **RESOLVED** STATE - Meta data in all Get operations ?  [412](https://github.com/dapr/dotnet-sdk/issues/412)

- **ADDED** validation for .Net 5. [429](https://github.com/dapr/dotnet-sdk/issues/429)

- **RESOLVED** Provide alternatives for raw bytes in all Dapr Client APIs and remove automatic protobuf serialization [442](https://github.com/dapr/dotnet-sdk/issues/442)

- **RESOLVED** Dapr Actors fails to serialize exceptions [445](https://github.com/dapr/dotnet-sdk/issues/445)

- **RESOLVED** Provide a single way to configure System.Text.Json serializer options for all Dapr Client and Actors features [532](https://github.com/dapr/dotnet-sdk/issues/532)

- **RESOLVED** Updates for next runtime RC [582](https://github.com/dapr/dotnet-sdk/issues/582)

### Go SDK

- **RESOLVED** Updates for next runtime RC [142](https://github.com/dapr/go-sdk/issues/142)

### Java SDK

- **RESOLVED** [Unit Test] java-sdk: Coverage Audit [365](https://github.com/dapr/java-sdk/issues/365)

- **RESOLVED** Fix PubSub publish + Update IT to use RC3 bits. [471](https://github.com/dapr/java-sdk/pull/471)

- **RESOLVED** Enhancing validation for ActorTurnBasedConcurrencyIT. [474](https://github.com/dapr/java-sdk/pull/474)

- **RESOLVED** Adds IT to confirm eTag is parsed correctly to/from runtime. [475](https://github.com/dapr/java-sdk/pull/475)

- **REMOVED** Context from request and response objects. [478](https://github.com/dapr/java-sdk/issues/478)

- **ADDED** Support many values for one query param in HTTP and binary data in Cloud Event for PubSub. [484](https://github.com/dapr/java-sdk/issues/484)

### Python SDK

- **RESOLVED** Publish python sdk doc to github page [69](https://github.com/dapr/python-sdk/issues/69)

- **UPDATED** versioning for Python SDK to 1.0 RC [151](https://github.com/dapr/python-sdk/issues/151)

- **ADDED** Autovalidation for python examples. [177](https://github.com/dapr/python-sdk/issues/177)

- **RESOLVED** Updates for next runtime RC [192](https://github.com/dapr/python-sdk/issues/192)

### Rust SDK

- **RESOLVED** update proto to the latest [30](https://github.com/dapr/rust-sdk/issues/30)

- **RESOLVED** Automate cargo package publish process [33](https://github.com/dapr/rust-sdk/issues/33)

### C++ SDK

- **RESOLVED** Update copyright header [27](https://github.com/dapr/cpp-sdk/issues/27)

### JavaScript SDK

- **RESOLVED** Upgrade proto to the latest [63](https://github.com/dapr/js-sdk/issues/63)

### Documentation

- **RESOLVED** Update troubleshooting guide for tracing [208](https://github.com/dapr/docs/issues/208)

- **RESOLVED** Improved the service invocation building block concepts doc [362](https://github.com/dapr/docs/issues/362)

- **RESOLVED** Provide guidance doc to use Prometheus queries to view Dapr metrics [707](https://github.com/dapr/docs/issues/707)

- **RESOLVED** Support KiND cluster for local dev environment [800](https://github.com/dapr/docs/issues/800)

- **RESOLVED** Update the mTLS configuration doc to describe how to run Sentry control plan service locally [851](https://github.com/dapr/docs/issues/851)

- **RESOLVED** Establish a deprecation/support versions policy [864](https://github.com/dapr/docs/issues/864)

- **RESOLVED** Update docs for dapr/dapr#2338 [899](https://github.com/dapr/docs/issues/899)

- **RESOLVED** Binding documentation needed for Alicloud Object Storage (OSS) [970](https://github.com/dapr/docs/issues/970)

- **RESOLVED** Incorrect instructions for sending ETag [1071](https://github.com/dapr/docs/issues/1071)

- **RESOLVED** Updating K8s guidance to include app rollout step for when a cluster is completely restarted [1072](https://github.com/dapr/docs/issues/1072)

- **RESOLVED** Update Secrets API reference with the new Get Bulk Secret HTTP Response type [1089](https://github.com/dapr/docs/issues/1089)

- **RESOLVED** Add competing consumer concept to pub/sub overview docs [1093](https://github.com/dapr/docs/issues/1093)

- **RESOLVED** [CONTENT] Add documentation for the "--dapr-http-max-request-size" argument for the CLI and "dapr.io/http-max-request-size"  annotation [1099](https://github.com/dapr/docs/issues/1099)

- **RESOLVED** Document all the environments variables used by developer in code and in the dapr CLI [1114](https://github.com/dapr/docs/issues/1114)

- **RESOLVED** Rework Azure Blob Storage documentation to be more clear [1122](https://github.com/dapr/docs/pull/1122)

- **RESOLVED** Update the component docs for bindings to capture all the metadata fields and have complete examples [1137](https://github.com/dapr/docs/issues/1137)

- **RESOLVED** Update get-started-component.md [1139](https://github.com/dapr/docs/pull/1139)

- **RESOLVED** HTTP Binding missing information/outdated [1153](https://github.com/dapr/docs/issues/1153)

- **RESOLVED** CLI Upgrade command missing [1163](https://github.com/dapr/docs/issues/1163)

- **RESOLVED** Update the Kubernetes Hosting documentation [1168](https://github.com/dapr/docs/issues/1168)

- **RESOLVED** Update the Service Invocation Perf numbers for v1.0 [1169](https://github.com/dapr/docs/issues/1169)

- **RESOLVED** fixed typo in Service invocation overview [1170](https://github.com/dapr/docs/pull/1170)

- **RESOLVED** Remove retry policies section for state [1172](https://github.com/dapr/docs/issues/1172)

- **RESOLVED** [CONTENT] - v1.0 - Update RC related commands in "getting-started" [1188](https://github.com/dapr/docs/issues/1188)

- **RESOLVED** It is unclear which state store components support actors [1199](https://github.com/dapr/docs/issues/1199)

### Quickstarts

- **RESOLVED** Document steps to setup allow lists feature for self hosted mode [317](https://github.com/dapr/quickstarts/issues/317)

- **RESOLVED** Add OpenTelemetry collector agent instruction into quickstarts sample [324](https://github.com/dapr/quickstarts/issues/324)

- **RESOLVED** Kafka helm chart deprecated. [325](https://github.com/dapr/quickstarts/issues/325)

- **RESOLVED** Kubernetes quickstarts should point at 'latest' container tags. [346](https://github.com/dapr/quickstarts/issues/346)

### Test Infrastructure

- **RESOLVED** Update test-infra to v0.12.0 .Net SDK  [78](https://github.com/dapr/test-infra/issues/78)

## Upgrading to Dapr 1.0.0

To upgrade to this release of Dapr, follow the steps here to ensure a smooth upgrade. You know, the one where you don't get red errors on the terminal.. we all hate that, right?

### Local Machine / Self-hosted

Uninstall Dapr using the CLI you currently have installed. Note that this will remove the default $HOME/.dapr directory, binaries and all containers dapr_redis, dapr_placement and dapr_zipkin. Linux users need to run sudo if docker command needs sudo:

```bash
dapr uninstall --all
```

For RC releases like this, download the latest and greatest release from [here](https://github.com/dapr/cli/releases) and put the `dapr` binary in your PATH.

Once you have installed the CLI, run:

```bash
dapr init --runtime-version=1.0.0
```

Wait for the update to finish,  ensure you are using the latest version of Dapr(1.0.0) with:

```bash
$ dapr --version

CLI version: 1.0.0
Runtime version: 1.0.0
```

### Kubernetes

#### Upgrading from previous version

You can perform zero-downtime upgrades using both Helm 3 and the Dapr CLI.

##### Upgrade using the CLI

Download the latest RC release from [here](https://github.com/dapr/cli/releases) and put the `dapr` binary in your PATH.

To upgrade Dapr, run:

```
dapr upgrade --runtime-version 1.0.0 -k
```

To upgrade with high availability mode:

```
dapr upgrade --runtime-version 1.0.0 --enable-ha=true -k
```

Wait until the operation is finished and check your status with `dapr status -k`.

All done!

*Note: Make sure your deployments are restarted to pick the latest version of the Dapr sidecar*

##### Upgrade using Helm

To upgrade Dapr using Helm, run:

```
helm repo add dapr https://dapr.github.io/helm-charts/
helm repo update

helm upgrade dapr dapr/dapr --version 1.0.0 --namespace=dapr-system --wait
```

Wait until the operation is finished and check your status with `dapr status -k`.

All done!

*Note: Make sure your deployments are restarted to pick the latest version of the Dapr sidecar*

#### Starting a fresh install on a cluster 

You can use Helm 3 to install Dapr:
```
helm repo add dapr https://dapr.github.io/helm-charts/
helm repo update

kubectl create namespace dapr-system

helm install dapr dapr/dapr --version 1.0.0 --namespace dapr-system --wait
```

Alternatively, you can use the latest version of CLI:

```
dapr init --runtime-version=1.0.0 -k
```

##### Post installation

Verify the control plane pods are running and are healthy:

```
$ dapr status -k
  NAME                   NAMESPACE    HEALTHY  STATUS   REPLICAS  VERSION  AGE  CREATED
  dapr-dashboard         dapr-system  True     Running  1         0.6.0    15s  2021-02-14 13:07.39
  dapr-sidecar-injector  dapr-system  True     Running  1         1.0.0   15s  2021-02-14 13:07.39
  dapr-sentry            dapr-system  True     Running  1         1.0.0   15s  2021-02-14 13:07.39
  dapr-operator          dapr-system  True     Running  1         1.0.0   15s  2021-02-14 13:07.39
  dapr-placement         dapr-system  True     Running  1         1.0.0   15s  2021-02-14 13:07.39
```

After Dapr 1.0.0 has been installed, perform a rolling restart for your deployments to pick up the new version of the sidecar.
This can be done with:

```
kubectl rollout restart deploy/<deployment-name>
```

## Breaking Changes

### Components

- **FIXED** handling of key not found in mongodb to return empty result instead of errror. [684](https://github.com/dapr/components-contrib/issues/684)

- **RESOLVED** Error when saving byte[] in cosmosdb [685](https://github.com/dapr/components-contrib/issues/685)

### .NET SDK

- **RESOLVED** Provide alternatives for raw bytes in all Dapr Client APIs and remove automatic protobuf serialization [442](https://github.com/dapr/dotnet-sdk/issues/442)

- **RESOLVED** Provide a single way to configure System.Text.Json serializer options for all Dapr Client and Actors features [532](https://github.com/dapr/dotnet-sdk/issues/532)

- **RESOLVED** Updates for next runtime RC [582](https://github.com/dapr/dotnet-sdk/issues/582)

### Go SDK

- **RESOLVED** Updates for next runtime RC [142](https://github.com/dapr/go-sdk/issues/142)

### Java SDK

- **REMOVED** Context from request and response objects. [478](https://github.com/dapr/java-sdk/issues/478)

- **ADDED** Support many values for one query param in HTTP and binary data in Cloud Event for PubSub. [484](https://github.com/dapr/java-sdk/issues/484)

### Python SDK

- **RESOLVED** Updates for next runtime RC [192](https://github.com/dapr/python-sdk/issues/192)